{% extends "base.html" %}
{% load i18n %}

{% block content %}

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<style> .color-square {
	width: 10px !important;
	float: left;
}

canvas#bar-chart {width: 400px; height:400px;
  margin: 15px auto;}
	</style>
	Average percent color words: {{ avg_pct_color | floatformat:2 }}
	Top 5 color words:
	{% for item in most_used_color_words %}
	 {{ item.0}} {{ item.1 }}
	{% endfor %}
  {{ data | length }} works <br />

	<canvas id="barChart"></canvas>
	<script>
			var label_array = "{% for item in most_used_color_words %}{{ item.0 }},{% endfor %}".split(",", 10);
			var data = {
			labels: "{% for item in most_used_color_words %}{{ item.0 }},{% endfor %}".split(","),
						datasets: [
								{
										backgroundColor: [
												'rgba(255, 99, 132, 0.2)',
												'rgba(54, 162, 235, 0.2)',
												'rgba(255, 206, 86, 0.2)',
												'rgba(75, 192, 192, 0.2)',
												'rgba(153, 102, 255, 0.2)',
												'rgba(255, 159, 64, 0.2)'
										],
										borderColor: [
												'rgba(255,99,132,1)',
												'rgba(54, 162, 235, 1)',
												'rgba(255, 206, 86, 1)',
												'rgba(75, 192, 192, 1)',
												'rgba(153, 102, 255, 1)',
												'rgba(255, 159, 64, 1)'
										],
										borderWidth: 1,
										data: "{% for item in most_used_color_words%}{{ item.1 }},{% endfor %}".split(",", 10),
								}
						]
				};
				console.log(data);
				var ctx = document.getElementById('barChart').getContext('2d');
				ctx.canvas.width = 300;
				ctx.canvas.height = 300;
				var barChart = new Chart(ctx, {
						type: 'bar',
						data: data,
				});
	</script>

	<table class="table table-hover table-responsive">
		{% for work in data %}
		<tr>
			<td class="col-xs-6 col-md-3">
				{{ work.title }} ({{ work.year }})<br />
				by {{ work.author }} <br />
				{{ work.period | default:"n/a" }} | {{ work.mode | default:"n/a" }} | {{ work.role | default:"n/a" }} | {{ work.nationality | default:"n/a" }}
			</td>

			<td class="col-xs-6 col-md-3">
				{{ work.pct_color|floatformat:2 }}% <br />
				color words
			</td>

			<td class="col-xs-6 col-md-3">
				{% for color in work.cd %}
					{{ color.0 }} ({{ color.1 }})
				{% endfor %}
			</td>

			<td class="col-xs-6 col-md-3">
				{% for item in work.cl %}
						<a href="#" data-toggle="tooltip" data-placement="top" title="Word: {{ item.0 }}  |   Word Type: {{ item.1 | capfirst }}  |  Color family: {{ item.3 }}">
						<div class="color-square" style="background:{{ item.2 }}"></div>
				{% endfor %}

			</td>
		</tr>
  {% endfor %}
	</table>


	<!--jQuery-->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

	<script>$(document).ready(function(){
		$('[data-toggle="tooltip"]').tooltip();
	});</script>

{% endblock %}
